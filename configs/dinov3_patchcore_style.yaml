# DINOv3 异常检测配置
# 检测模式：cls / patch / combined

model:
  name: dinov3_image_level          # 模型名称，"dinov3_image_level" 是可用的模型之一
  dino_model_name: dinov3_base      # backbone，通常选择 dinov3_base
  model_path: null                  # 可选，自定义 DINOv3 权重
  num_centers: 50000                # PatchCore 聚类中心数量（更小，减少内存消耗）
  buffer_size: 2500000               # 记忆库的buffer大小（可以根据显存调整）
  num_neighbors: 1                  # PatchCore 默认1-NN
  reduce_dim: 128                   # PatchCore降维到128（经典设置）
  use_faiss: true                   # 使用faiss加速KNN
  detection_mode: patch             # patch 级别，PatchCore 风格
  cls_weight: 0.5                   # 仅combined模式有效，cls模式可忽略

data:
  train_data_path: ./data/train     # 训练样本路径
  batch_size: 8                     # batch size
  num_workers: 8                    # 数据加载线程数
  image_size: 512                   # 训练和推理图像大小
  use_augmentation: true            # 训练图像是否增强

training:
  device: cuda                      # 训练/推理设备
  device_id: 0                      # GPU编号

output:
  dir: ./outputs-patch                    # 输出目录

